<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: For a Better Community</title>
    <!-- Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            @apply bg-blue-50 text-gray-800;
        }
        .quiz-container {
            @apply bg-white p-8 rounded-xl shadow-lg max-w-2xl w-full mx-auto my-10;
        }
        .question-text {
            @apply text-xl font-semibold mb-6 text-blue-800;
        }
        .answer-option {
            @apply flex items-center mb-4 p-4 border border-blue-200 rounded-lg cursor-pointer transition-all duration-200;
        }
        .answer-option:hover {
            @apply bg-blue-50 border-blue-300;
        }
        .answer-option.selected {
            @apply bg-blue-100 border-blue-500 ring-2 ring-blue-500;
        }
        .answer-option input[type="radio"] {
            @apply mr-3;
        }
        .feedback-box {
            @apply mt-4 p-4 rounded-lg text-sm;
        }
        .feedback-correct {
            @apply bg-green-100 text-green-800 border border-green-300;
        }
        .feedback-incorrect {
            @apply bg-red-100 text-red-800 border border-red-300;
        }
        .quiz-navigation button {
            @apply px-6 py-3 rounded-lg font-semibold transition-all duration-200;
        }
        .quiz-navigation button.primary {
            @apply bg-blue-600 text-white hover:bg-blue-700 shadow-md;
        }
        .quiz-navigation button.secondary {
            @apply bg-gray-200 text-gray-700 hover:bg-gray-300;
        }
        .hint-button {
            @apply text-blue-500 hover:text-blue-700 font-medium text-sm mt-2;
        }
        .hint-text {
            @apply bg-yellow-50 text-yellow-800 p-3 rounded-lg text-sm mt-3 border border-yellow-200;
        }
        .results-container {
            @apply text-center mt-8;
        }
        .results-score {
            @apply text-3xl font-bold text-blue-700 mb-4;
        }
        .results-details {
            @apply text-lg;
        }
        .restart-button {
            @apply mt-6 bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 shadow-md;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <div class="quiz-container">
        <h1 class="text-3xl font-bold text-center mb-8 text-blue-900">Quiz: For a Better Community</h1>

        <!-- Question Section -->
        <div id="quiz-question-section">
            <p class="text-lg mb-2"><span id="question-number" class="font-semibold text-blue-600"></span> / <span id="total-questions"></span></p>
            <h2 id="question-text" class="question-text"></h2>
            <div id="answer-options" class="flex flex-col gap-3">
                <!-- Answer options will be injected here by JavaScript -->
            </div>
            <button id="show-hint-button" class="hint-button block mx-auto">Hiển thị gợi ý</button>
            <p id="hint-text" class="hint-text hidden"></p>
            <div id="feedback-area" class="feedback-box hidden"></div>
            <div class="quiz-navigation flex justify-between mt-8">
                <button id="prev-button" class="secondary" disabled>Câu trước</button>
                <button id="next-button" class="primary">Câu tiếp theo</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="quiz-results-section" class="results-container hidden">
            <h2 class="text-3xl font-bold text-blue-800 mb-4">Kết quả Quiz</h2>
            <p class="results-score">Bạn đã đạt: <span id="final-score">0</span> / <span id="total-score-max"></span></p>
            <p id="results-message" class="results-details"></p>
            <button id="restart-button" class="restart-button">Làm lại Quiz</button>
        </div>
    </div>

    <script>
        const quizData = {
          "questions": [
            {
              "question": "Hoạt động nào tập trung chủ yếu vào việc gây quỹ cho một mục đích nào đó?",
              "hint": "Hãy nghĩ về việc các tổ chức làm gì khi họ cần hỗ trợ tài chính cho các dự án của mình.",
              "answerOptions": [
                {
                  "text": "Gây quỹ (Fundraising)",
                  "rationale": "Thuật ngữ này đề cập cụ thể đến quá trình tìm kiếm và thu thập các đóng góp tài chính tự nguyện.",
                  "isCorrect": true
                },
                {
                  "text": "Chiến dịch dọn dẹp (A clean-up campaign)",
                  "rationale": "Hoạt động này là về cải thiện môi trường vật lý, không trực tiếp về việc thu tiền.",
                  "isCorrect": false
                },
                {
                  "text": "Dạy kèm (Tutoring)",
                  "rationale": "Hoạt động này liên quan đến việc cung cấp hỗ trợ học tập cho ai đó, không nhất thiết bao gồm việc gây quỹ.",
                  "isCorrect": false
                },
                {
                  "text": "Từ thiện (Charity)",
                  "rationale": "Mặc dù gây quỹ thường được thực hiện cho một tổ chức từ thiện, 'từ thiện' đề cập đến tổ chức hoặc hành động cho đi, không phải hoạt động cụ thể của việc thu tiền.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Lợi ích chính đối với TÌNH NGUYỆN VIÊN khi họ tham gia vào dịch vụ cộng đồng là gì?",
              "hint": "Hãy xem xét việc giúp đỡ người khác có thể ảnh hưởng đến sự phát triển cá nhân và cảm xúc của một người như thế nào.",
              "answerOptions": [
                {
                  "text": "Môi trường sạch sẽ hơn",
                  "rationale": "Đây là lợi ích cho toàn bộ cộng đồng, không chỉ riêng cá nhân tình nguyện viên.",
                  "isCorrect": false
                },
                {
                  "text": "Cảm giác trách nhiệm và sự đồng cảm",
                  "rationale": "Tham gia vào dịch vụ giúp cá nhân phát triển các giá trị cá nhân quan trọng và hiểu được quan điểm của người khác.",
                  "isCorrect": true
                },
                {
                  "text": "Giáo dục tốt hơn cho trẻ em",
                  "rationale": "Đây là kết quả tích cực cho những người được giúp đỡ, chứ không phải là lợi ích trực tiếp cho người tình nguyện.",
                  "isCorrect": false
                },
                {
                  "text": "Nhận lương",
                  "rationale": "Tình nguyện, theo định nghĩa, là công việc không lương được thực hiện một cách tự nguyện.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Nếu mục tiêu của bạn là 'bảo vệ môi trường', hoạt động nào sẽ phù hợp nhất?",
              "hint": "Tên của hoạt động đó đã nói lên rất nhiều về mục tiêu của nó.",
              "answerOptions": [
                {
                  "text": "Dạy kèm trẻ em tại trại trẻ mồ côi",
                  "rationale": "Đây là một hoạt động xã hội có giá trị nhưng không trực tiếp giải quyết các vấn đề môi trường.",
                  "isCorrect": false
                },
                {
                  "text": "Tổ chức một buổi hòa nhạc gây quỹ",
                  "rationale": "Mặc dù số tiền có thể dành cho mục đích môi trường, nhưng bản thân hoạt động này không phải là hành động bảo vệ trực tiếp.",
                  "isCorrect": false
                },
                {
                  "text": "Tham gia chiến dịch dọn dẹp",
                  "rationale": "Hoạt động này liên quan đến việc trực tiếp loại bỏ rác thải và ô nhiễm khỏi không gian tự nhiên hoặc công cộng.",
                  "isCorrect": true
                },
                {
                  "text": "Hỗ trợ người cao tuổi",
                  "rationale": "Đây là một hình thức dịch vụ cộng đồng tập trung vào phúc lợi xã hội, không phải môi trường.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Mục đích chính của 'chiến dịch dọn dẹp' là gì?",
              "hint": "Tên của hoạt động đó đã cho một gợi ý lớn về mục tiêu của nó.",
              "answerOptions": [
                {
                  "text": "Cải thiện diện mạo và sức khỏe của một địa điểm",
                  "rationale": "Các chiến dịch này tập trung vào việc loại bỏ rác thải và chất ô nhiễm để làm cho một khu vực sạch sẽ và an toàn hơn.",
                  "isCorrect": true
                },
                {
                  "text": "Dạy học sinh các môn học mới",
                  "rationale": "Dạy học là mục tiêu chính của việc dạy kèm, không phải một sự kiện dọn dẹp tạm thời.",
                  "isCorrect": false
                },
                {
                  "text": "Cung cấp nhà ở cho trẻ em",
                  "rationale": "Đây là chức năng của trại trẻ mồ côi, không phải một sự kiện dọn dẹp tạm thời.",
                  "isCorrect": false
                },
                {
                  "text": "Kêu gọi tiền từ công chúng",
                  "rationale": "Việc kêu gọi quyên góp là đặc trưng của việc gây quỹ, không phải dọn dẹp.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Trong một bản thuyết trình dự án nhóm, 'Nhóm mục tiêu' (Target Group) đề cập đến điều gì?",
              "hint": "Hãy nghĩ xem ai sẽ nhận được sự giúp đỡ hoặc lợi ích từ dự án của bạn.",
              "answerOptions": [
                {
                  "text": "Các tình nguyện viên trong nhóm của bạn",
                  "rationale": "Đây đề cập đến những người thực hiện hành động, không phải những người nhận được sự giúp đỡ.",
                  "isCorrect": false
                },
                {
                  "text": "Cộng đồng cụ thể hoặc các cá nhân mà bạn dự định giúp đỡ",
                  "rationale": "Điều này xác định chính xác người nhận hoặc người hưởng lợi từ hoạt động dịch vụ cộng đồng.",
                  "isCorrect": true
                },
                {
                  "text": "Các giáo viên sẽ chấm điểm dự án",
                  "rationale": "Mặc dù họ là đối tượng, nhưng họ không phải là người hưởng lợi từ chính dịch vụ cộng đồng.",
                  "isCorrect": false
                },
                {
                  "text": "Địa điểm diễn ra hoạt động",
                  "rationale": "Điều này mô tả 'nơi nào', chứ không phải 'ai' mà dự án nhắm đến.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Một người tự nguyện giúp đỡ hoặc làm việc miễn phí được gọi là...",
              "hint": "Từ này là trung tâm của chủ đề toàn bộ bài học.",
              "answerOptions": [
                {
                  "text": "Gia sư (Tutor)",
                  "rationale": "Gia sư là một loại người giúp đỡ cụ thể tập trung vào việc giảng dạy, và họ có thể được trả lương hoặc không lương.",
                  "isCorrect": false
                },
                {
                  "text": "Từ thiện (Charity)",
                  "rationale": "Từ thiện là một tổ chức giúp đỡ mọi người, không phải một cá nhân thực hiện công việc.",
                  "isCorrect": false
                },
                {
                  "text": "Tình nguyện viên (Volunteer)",
                  "rationale": "Đây là thuật ngữ chung chỉ người sẵn lòng dành thời gian của mình cho một mục đích cộng đồng mà không được trả lương.",
                  "isCorrect": true
                },
                {
                  "text": "Trẻ mồ côi (Orphan)",
                  "rationale": "Trẻ mồ côi là một đứa trẻ không có cha mẹ; chúng thường là đối tượng nhận được công việc tình nguyện, không phải là người cung cấp.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Lợi ích chính đối với CỘNG ĐỒNG từ một dự án giúp đỡ trẻ em có hoàn cảnh khó khăn là gì?",
              "hint": "Việc giúp đỡ một nhóm trẻ em cụ thể ảnh hưởng như thế nào đến tương lai của toàn bộ cộng đồng?",
              "answerOptions": [
                {
                  "text": "Tình nguyện viên cảm thấy hạnh phúc",
                  "rationale": "Đây là lợi ích cá nhân cho tình nguyện viên, không phải cho cộng đồng nói chung.",
                  "isCorrect": false
                },
                {
                  "text": "Trẻ em nhận được sự chăm sóc và giáo dục tốt hơn",
                  "rationale": "Cải thiện phúc lợi và kỹ năng của các thành viên trẻ tuổi sẽ củng cố tương lai của toàn bộ cộng đồng.",
                  "isCorrect": true
                },
                {
                  "text": "Trường học có danh tiếng tốt",
                  "rationale": "Mặc dù đây có thể là một tác dụng phụ, nhưng lợi ích chính là cho trẻ em và xã hội, chứ không phải hình ảnh của một tổ chức.",
                  "isCorrect": false
                },
                {
                  "text": "Nó cung cấp một chủ đề tốt cho một dự án",
                  "rationale": "Giá trị giáo dục của dự án đối với học sinh làm dự án là thứ yếu so với tác động thực tế đến cộng đồng.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Trong phần 'Kế hoạch hành động' (Plan of Action) của một dự án, thông tin gì nên được bao gồm?",
              "hint": "Phần này nên chi tiết 'cách thức' và 'khi nào' của dự án của bạn.",
              "answerOptions": [
                {
                  "text": "Chỉ tên của dự án",
                  "rationale": "Tên là một định danh, nhưng nó không giải thích cách dự án sẽ được thực hiện.",
                  "isCorrect": false
                },
                {
                  "text": "Các kết quả mong đợi",
                  "rationale": "Điều này mô tả kết quả bạn mong muốn, không phải các bước bạn sẽ thực hiện để đạt được nó.",
                  "isCorrect": false
                },
                {
                  "text": "Các bước và thời gian biểu để hoàn thành hoạt động",
                  "rationale": "Một kế hoạch phác thảo các nhiệm vụ cụ thể, ai sẽ làm chúng và lịch trình để tuân theo.",
                  "isCorrect": true
                },
                {
                  "text": "Lý do tại sao dự án quan trọng",
                  "rationale": "Đây là động lực cho dự án, không phải kế hoạch hậu cần để thực hiện nó.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Một 'trại trẻ mồ côi' (orphanage) là nơi cung cấp sự chăm sóc cho...",
              "hint": "Từ này chứa một gốc từ có nghĩa là một đứa trẻ có cha mẹ đã qua đời.",
              "answerOptions": [
                {
                  "text": "Người cao tuổi",
                  "rationale": "Nơi ở cho người cao tuổi thường được gọi là viện dưỡng lão hoặc cơ sở chăm sóc người cao tuổi.",
                  "isCorrect": false
                },
                {
                  "text": "Trẻ em không có cha mẹ",
                  "rationale": "Đây là định nghĩa cụ thể của một trại trẻ mồ côi.",
                  "isCorrect": true
                },
                {
                  "text": "Động vật đi lạc",
                  "rationale": "Nơi dành cho động vật đi lạc thường được gọi là trung tâm cứu hộ động vật.",
                  "isCorrect": false
                },
                {
                  "text": "Người vô gia cư",
                  "rationale": "Nơi dành cho người vô gia cư thường được gọi là mái ấm hoặc trung tâm cứu trợ.",
                  "isCorrect": false
                }
              ]
            },
            {
              "question": "Điều nào sau đây là ví dụ tốt nhất về 'Hoạt động' dịch vụ cộng đồng?",
              "hint": "Một hoạt động là một hành động cụ thể mà bạn thực hiện. Lựa chọn nào mô tả một hành động rõ ràng?",
              "answerOptions": [
                {
                  "text": "Trẻ em có hoàn cảnh khó khăn",
                  "rationale": "Điều này mô tả một nhóm mục tiêu, những người bạn sẽ giúp đỡ, không phải hành động bạn sẽ thực hiện.",
                  "isCorrect": false
                },
                {
                  "text": "Một công viên sạch hơn",
                  "rationale": "Điều này mô tả một kết quả hoặc thành quả mong đợi, không phải bản thân hoạt động.",
                  "isCorrect": false
                },
                {
                  "text": "Cảm giác trách nhiệm",
                  "rationale": "Đây là lợi ích cá nhân hoặc cảm giác mà một tình nguyện viên có thể đạt được, không phải nhiệm vụ họ làm.",
                  "isCorrect": false
                },
                {
                  "text": "Trồng cây trong công viên địa phương",
                  "rationale": "Đây là một hành động cụ thể, hữu hình mà một tình nguyện viên có thể thực hiện cho cộng đồng.",
                  "isCorrect": true
                }
              ]
            }
          ]
        };

        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = []; // To store user's selected answers for review/restart
        let hasAnsweredCurrentQuestion = false;

        const quizQuestionSection = document.getElementById('quiz-question-section');
        const quizResultsSection = document.getElementById('quiz-results-section');
        const questionNumberSpan = document.getElementById('question-number');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const questionTextElement = document.getElementById('question-text');
        const answerOptionsContainer = document.getElementById('answer-options');
        const showHintButton = document.getElementById('show-hint-button');
        const hintTextElement = document.getElementById('hint-text');
        const feedbackArea = document.getElementById('feedback-area');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const finalScoreSpan = document.getElementById('final-score');
        const totalScoreMaxSpan = document.getElementById('total-score-max');
        const resultsMessage = document.getElementById('results-message');
        const restartButton = document.getElementById('restart-button');

        totalQuestionsSpan.textContent = quizData.questions.length;
        totalScoreMaxSpan.textContent = quizData.questions.length;

        function loadQuestion() {
            // Clear previous feedback and hint
            feedbackArea.classList.add('hidden');
            feedbackArea.textContent = '';
            hintTextElement.classList.add('hidden');
            showHintButton.classList.remove('hidden'); // Show hint button for new question

            const question = quizData.questions[currentQuestionIndex];
            questionNumberSpan.textContent = currentQuestionIndex + 1;
            questionTextElement.textContent = question.question;
            answerOptionsContainer.innerHTML = ''; // Clear previous options

            // Shuffle answer options
            const shuffledOptions = [...question.answerOptions].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach((option, index) => {
                const optionDiv = document.createElement('label');
                optionDiv.className = 'answer-option';
                optionDiv.innerHTML = `
                    <input type="radio" name="answer" value="${index}" class="form-radio text-blue-600 h-5 w-5">
                    <span>${option.text}</span>
                `;
                optionDiv.addEventListener('click', () => selectAnswer(option, optionDiv));
                answerOptionsContainer.appendChild(optionDiv);
            });

            // Update navigation buttons
            prevButton.disabled = currentQuestionIndex === 0;
            nextButton.textContent = currentQuestionIndex === quizData.questions.length - 1 ? 'Hoàn thành Quiz' : 'Câu tiếp theo';

            // Check if user has answered this question before and restore selection/feedback
            hasAnsweredCurrentQuestion = userAnswers[currentQuestionIndex] !== undefined;
            if (hasAnsweredCurrentQuestion) {
                const selectedOptionValue = userAnswers[currentQuestionIndex].selectedOptionIndex;
                const selectedRadioButton = answerOptionsContainer.querySelector(`input[type="radio"][value="${selectedOptionValue}"]`);
                if (selectedRadioButton) {
                    selectedRadioButton.checked = true;
                    // Visually mark selected option
                    const selectedLabel = selectedRadioButton.closest('.answer-option');
                    selectedLabel.classList.add('selected');

                    // Show feedback immediately if already answered
                    const selectedOptionData = quizData.questions[currentQuestionIndex].answerOptions[userAnswers[currentQuestionIndex].originalOptionIndex];
                    displayFeedback(selectedOptionData.rationale, selectedOptionData.isCorrect);

                    // Disable further changes to answers for this question
                    answerOptionsContainer.querySelectorAll('input[type="radio"]').forEach(radio => radio.disabled = true);
                }
            } else {
                 // Enable radio buttons if not yet answered
                answerOptionsContainer.querySelectorAll('input[type="radio"]').forEach(radio => radio.disabled = false);
            }
        }

        function selectAnswer(selectedOptionData, selectedOptionDiv) {
            if (hasAnsweredCurrentQuestion) return; // Prevent changing answer if already answered

            // Remove 'selected' class from all options
            answerOptionsContainer.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
            // Add 'selected' class to the clicked option
            selectedOptionDiv.classList.add('selected');

            // Find the original index of the selected option
            const originalOptionIndex = quizData.questions[currentQuestionIndex].answerOptions.findIndex(
                option => option.text === selectedOptionData.text
            );

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                selectedOptionIndex: selectedOptionDiv.querySelector('input').value, // Index based on shuffled options
                originalOptionIndex: originalOptionIndex, // Original index in quizData
                isCorrect: selectedOptionData.isCorrect
            };

            // Display feedback
            displayFeedback(selectedOptionData.rationale, selectedOptionData.isCorrect);

            // Disable all radio buttons for the current question after an answer is selected
            answerOptionsContainer.querySelectorAll('input[type="radio"]').forEach(radio => radio.disabled = true);
            hasAnsweredCurrentQuestion = true; // Mark question as answered
        }

        function displayFeedback(rationale, isCorrect) {
            feedbackArea.classList.remove('hidden', 'feedback-correct', 'feedback-incorrect');
            feedbackArea.textContent = rationale;
            if (isCorrect) {
                feedbackArea.classList.add('feedback-correct');
            } else {
                feedbackArea.classList.add('feedback-incorrect');
            }
        }

        showHintButton.addEventListener('click', () => {
            hintTextElement.textContent = quizData.questions[currentQuestionIndex].hint;
            hintTextElement.classList.remove('hidden');
            showHintButton.classList.add('hidden'); // Hide hint button after showing hint
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                // End of quiz
                calculateScore();
                showResults();
            }
        });

        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        function calculateScore() {
            score = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.isCorrect) {
                    score++;
                }
            });
        }

        function showResults() {
            quizQuestionSection.classList.add('hidden');
            quizResultsSection.classList.remove('hidden');
            finalScoreSpan.textContent = score;

            let message = '';
            const percentage = (score / quizData.questions.length) * 100;
            if (percentage === 100) {
                message = "Xuất sắc! Bạn đã trả lời đúng tất cả các câu hỏi.";
            } else if (percentage >= 70) {
                message = "Rất tốt! Bạn có kiến thức vững chắc về chủ đề này.";
            } else if (percentage >= 50) {
                message = "Khá tốt! Hãy ôn lại một chút để cải thiện nhé.";
            } else {
                message = "Tiếp tục cố gắng! Bạn có thể xem lại bài học để hiểu rõ hơn.";
            }
            resultsMessage.textContent = message;
        }

        restartButton.addEventListener('click', () => {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            quizResultsSection.classList.add('hidden');
            quizQuestionSection.classList.remove('hidden');
            loadQuestion();
        });

        // Initialize quiz
        loadQuestion();
    </script>
</body>
</html>
